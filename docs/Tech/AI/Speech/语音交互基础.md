# 语音交互基础



## 1. 语音交互评价指标

### 1.1 ASR评价指标

#### 1.1.1 识别率

看**纯引擎的识别率**，以及**不同信噪比状态下的识别率**（信噪比模拟不同车速、车窗、空调状态等），还有**在线/离线识别**的区别。



**WER：Word Error Rate 词错误率**

- 定义：为了使识别出来的词序列和标准的词序列之间保持一致，需要进行替换、删除或者插入某些词，这些插入、替换或删除的词的总个数，除以标准的词序列中词的总个数的百分比，即为WER。

- 公式：
    $$
    WER=100·\frac{S+D+I}{N}\%  \quad Accuracy=100-WER\%
    $$

    - Substitution——替换*
    - *Deletion——删除*
    - *Insertion——插入*
    - *N——单词数目*

**SER：Sentences Error Rate**

- SER，SER表述为句子中如果有一个词识别错误，那么这个句子被认为识别错误，句子识别错误的的个数，除以总的句子个数即为SER

- 其计算公式如下所示：
    $$
    SER=100·\frac{\text{#of sentences with at least one word error}}{\text{total # of sentences}}\%
    $$

**注意事项：**

- WER可以分男女、快慢、口音、数字/英文/中文等情况，分别来看。
- 因为有插入词，所以理论上WER有可能大于100%，但实际中、特别是大样本量的时候，是不可能的，否则就太差了，不可能被商用。
- 站在纯产品体验角度，很多人会以为识别率应该等于“句子识别正确的个数/总的句子个数”，即“识别（正确）率等于96%”这种，实际工作中，这个应该指向 **“SER（句错误率，Sentence Error Rate）” ，即“句子识别错误的个数/总的句子个数”。不过据说在实际工作中，一般句错误率是字错误率的2~3倍，所以可能就不怎么看了。



#### 1.1.2 语音唤醒相关指标

VT：Voice Trigger 语音唤醒

**需求背景**

- 近景识别时，用户可以手动操作，比如iPhone用户长按home键呼出Siri；近场情况下，信噪比高，信号清晰，算法可轻松搞定
- 远景识别时，用户触碰不到设备，因而需要语音唤醒。比如智能音箱，“天猫精灵”、“小度小度”等

**语音唤醒含义**

设备(手机、玩具、家电等)在休眠或锁屏状态下也能检测到用户的声音(设定的语音指令，即唤醒词)，让处于休眠状态下的设备直接进入到等待指令状态，开启语音交互第一步

**评价指标**

- **唤醒率：** 智能设备被成功唤醒的比率（通常用百分比表示）

- **误唤醒率：**在没有呼唤智能设备的时候，设备自己发声的比率 （单位通常为次 / 小时）

- **唤醒词的音节长度：**一般技术要求至少3个音节。比如“OK Google”和“Alexa”有四个音节，“Hey Siri”有三个音节；国内的智能音箱，比如小度，唤醒词是“小度小度”，而不能用“小度”——如果音节太短，一般误唤醒率会比较高。

- **唤醒响应时间**

- **功耗**

    

    

### 1.2 TTS评价指标

#### 1.2.1 语音合成

语音合成（Text-To-Speech, TTS）：将文字信息转化为声音信息，给应用配上“嘴巴”。



#### 1.2.2 评价指标

**主观测试（自然度），以MOS为主：**

- **MOS**（Mean Opinion Scores），专家级评测（主观）；1-5分，5分最好。

- **ABX**，普通用户评测（主观）。让用户来视听两个TTS系统，进行对比，看哪个好。

**客观测试：**

- 对声学参数进行评估，一般是计算**欧式距离**等（RMSE，LSD）。

- 对工程上的测试：**实时率**（合成耗时/语音时长），流式分首包、尾包，非流式不考察首包；**首包响应时间**（用户发出请求到用户感知到的第一包到达时间）、**内存占用**、**CPU占用**、**3\*24小时crash率**等。



### 1.3 对话系统评价指标

对话系统（Dialogue System），简单可以理解为Siri或各种Chatbot所能支持的聊天对话体验。

#### 1.3.1 用户任务达成

表征产品功能是否有用以及功能覆盖度

- 比如智能客服，如果这个Session最终是以接入人工为结束的，那基本就说明机器的回答有问题。或者重复提供给用户相同答案等等。
- 分专项或分意图的统计就更多了，不展开了。

#### 1.3.2 对话交互效率

比如**用户完成一个任务的耗时、回复语对信息传递和动作引导的效率、用户进行语音输入的效率**等（可能和打断，One-shot等功能相关）；具体定义，各个产品自己决定。

#### 1.3.3 对话系统的类型分类

1）**闲聊型**

- **CPS**（Conversations Per Session，平均单次对话轮数）。这算是微软小冰最早期提出的指标，并且是小冰内部的（唯一）最重要指标；

- **相关性**和**新颖性**。与原话题要有一定的相关性，但又不能是非常相似的话；

- **话题终结者**。如果机器说过这句话之后，通常用户都不会继续接了，那这句话就会给个负分。



2）**任务型**

- **留存率**。虽然是传统的指标，但是能够发现用户有没有形成这样的使用习惯；**留存的计算甚至可以精确到每个功能**，然后进一步根据功能区做归类，看看用户对哪类任务的接受程度较高，还可以从用户的问句之中分析发出指令的习惯去针对性的优化解析和对话过程；到后面积累的特征多了，评价机制建立起来了，就可以上强化学习；比如：之前百度高考，教考生填报志愿，就是这么弄的；

- **完成度**（即，前文提过的“用户任务达成率”）。由于任务型最后总要去调一个接口或者触发什么东西来完成任务，所以可以计算多少人进入了这个对话单元，其中有多少人最后调了接口；

- 相关的，还有（每个任务）**平均slot填入轮数或填充完整度**。即，完成一个任务，平均需要多少轮，平均填写了百分之多少的槽位slot。对于槽位的基础知识介绍，可详见《[填槽与多轮对话 | AI产品经理需要了解的AI技术概念](http://mp.weixin.qq.com/s?__biz=MjM5NzA5OTAwMA==&mid=2650005853&idx=1&sn=2c6bb9e9c3751fdc3fd95e89b8b6377d&chksm=bed865ca89afecdcdf0ecde9ed2385fb613cb2a40ad0c491582c7faf91841d17efdfe59718e1&scene=21#wechat_redirect)》。

3）**问答型**

- 最终求助人工的比例（即，前文提过的“用户任务达成率”相关）；

- 重复问同样问题的比例；

- “没答案”之类的比例。

整体来说，行业一般PR宣传时，会更多的提CPS。其他指标看起来可能相对太琐碎或不够高大上，但是，实际工作中，**可能CPS更多是面向闲聊型对话系统，而其他的场景，可能更应该从“效果”出发。**比如，如果小孩子哭了，机器人能够“哭声安慰”，没必要对话那么多轮次，反而应该越少越好。



#### 1.3.4 语料自然度和人性化的程度

- 目前对于这类问题，一般是使用**人工评估**的方式进行。这里的语料，通常不是单个句子，而是分为**单轮的问答对**或**多轮的一个session**。一般来讲，评分范围是**1~5分**：
    - 1分或2分：完全答非所问，以及含有不友好内容或不适合语音播报的特殊内容；
    - 3分：基本可用，问答逻辑正确；
    - 4分：能解决用户问题且足够精炼；
    - 5分：在4分基础上，能让人感受到情感及人设。

- 
- 另外，为了消除主观偏差，采用**多人标注、去掉极端值**的方式，是当前普遍的做法。







## 参考资料

[AI产品经理需要了解的语音交互评价指标](https://mp.weixin.qq.com/s?__biz=MjM5NzA5OTAwMA==&mid=2650005964&idx=1&sn=d09e96dd5d9e64ee3be6f5d04ab0c2af&chksm=bed8655b89afec4d05a678f96be868ae47a1e35a24988ec8df8019055d6832db116d02a5d052&mpshare=1&scene=1&srcid=1123BH35jmOMLClfrxHHlCri&key=50702a35c4b93088fdce185808bac5b173cb766cfebf9929755141354e38bbc661736e1569ea1ebc6ebeb61ef70d0714e2e380978457f57fb7b7f0c6b98ecaf04d1b3ddcbecbc6ef652539990677819f&ascene=0&uin=MzkyNDYwOTIw&devicetype=iMac+MacBookPro12%2C1+OSX+OSX+10.10.5+build(14F1912)&version=12020810&nettype=WIFI&fontScale=100&pass_ticket=d82UJ0dv8dBJw%2F7nrLlfmrvVLcysPC0OOmcVdE5eWmcL5AFS80IM3EwcLCP5Ptyc&ft_from=N4IgrgTgNg+gZhA9gWxALhCANCAxpCAUwDsAXGABwEMBzQ9EUxCgS12xBqTAphYBN0AJgCMATgC+QA)